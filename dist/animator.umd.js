!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.animator={})}(this,function(t){function n(t,n){return t(n={exports:{}},n.exports),n.exports}var e=n(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),r=n(function(t){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)}),o=function(t){return"object"==typeof t?null!==t:"function"==typeof t},a=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t},i=function(t){try{return!!t()}catch(t){return!0}},u=!i(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),c=e.document,s=o(c)&&o(c.createElement),f=!u&&!i(function(){return 7!=Object.defineProperty(s?c.createElement("div"):{},"a",{get:function(){return 7}}).a}),l=Object.defineProperty,h={f:u?Object.defineProperty:function(t,n,e){if(a(t),n=function(t,n){if(!o(t))return t;var e,r;if("function"==typeof(e=t.toString)&&!o(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!o(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(n),a(e),f)try{return l(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},d=u?function(t,n,e){return h.f(t,n,function(t,n){return{enumerable:!1,configurable:!0,writable:!0,value:n}}(0,e))}:function(t,n,e){return t[n]=e,t},p={}.hasOwnProperty,v=function(t,n){return p.call(t,n)},y=0,g=Math.random(),m=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++y+g).toString(36))},M=n(function(t){var n=e["__core-js_shared__"]||(e["__core-js_shared__"]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),O=M("native-function-to-string",Function.toString),b=n(function(t){var n=m("src"),o=(""+O).split("toString");r.inspectSource=function(t){return O.call(t)},(t.exports=function(t,r,a,i){var u="function"==typeof a;u&&(v(a,"name")||d(a,"name",r)),t[r]!==a&&(u&&(v(a,n)||d(a,n,t[r]?""+t[r]:o.join(String(r)))),t===e?t[r]=a:i?t[r]?t[r]=a:d(t,r,a):(delete t[r],d(t,r,a)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[n]||O.call(this)})}),w=function(t,n,e){if(function(n){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}},E=function(t,n,o){var a,i,u,c,s=t&E.F,f=t&E.G,l=t&E.P,h=t&E.B,p=f?e:t&E.S?e[n]||(e[n]={}):(e[n]||{}).prototype,v=f?r:r[n]||(r[n]={}),y=v.prototype||(v.prototype={});for(a in f&&(o=n),o)u=((i=!s&&p&&void 0!==p[a])?p:o)[a],c=h&&i?w(u,e):l&&"function"==typeof u?w(Function.call,u):u,p&&b(p,a,u,t&E.U),v[a]!=u&&d(v,a,c),l&&y[a]!=u&&(y[a]=u)};e.core=r,E.F=1,E.G=2,E.S=4,E.P=8,E.B=16,E.W=32,E.U=64,E.R=128;var I=E,_={}.toString,x=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==function(t){return _.call(t).slice(8,-1)}(t)?t.split(""):Object(t)},S=Math.ceil,j=Math.floor,A=Math.min,P=(Array,n(function(t){var n=M("wks"),r=e.Symbol,o="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=o&&r[t]||(o?r:m)("Symbol."+t))}).store=n})),k=(P("species"),P("unscopables")),C=Array.prototype;null==C[k]&&d(C,k,{});var T=!0;function F(t){var n=t.getAttribute("data-guid");return n||(n=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),t.setAttribute("data-guid",n)),n}"find"in[]&&Array(1).find(function(){T=!1}),I(I.P+I.F*T,"Array",{find:function(t){return function(t,n,e){for(var r,o=Object(function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}(t)),a=x(o),i=w(n,e,3),u=(s=a.length)>0?A(function(t){return isNaN(t=+t)?0:(t>0?j:S)(t)}(s),9007199254740991):0,c=0;u>c;c++)if(i(r=a[c],c,o))return r;var s}(this,t,arguments.length>1?arguments[1]:void 0)}}),C[k].find=!0;var B={easeInQuad:function(t,n,e,r){return e*(t/=r)*t+n},easeOutQuad:function(t,n,e,r){return-e*(t/=r)*(t-2)+n},easeInOutQuad:function(t,n,e,r){return(t/=r/2)<1?e/2*t*t+n:-e/2*(--t*(t-2)-1)+n},easeInCubic:function(t,n,e,r){return e*(t/=r)*t*t+n},easeOutCubic:function(t,n,e,r){return e*((t=t/r-1)*t*t+1)+n},easeInOutCubic:function(t,n,e,r){return(t/=r/2)<1?e/2*t*t*t+n:e/2*((t-=2)*t*t+2)+n},easeInQuart:function(t,n,e,r){return e*(t/=r)*t*t*t+n},easeOutQuart:function(t,n,e,r){return-e*((t=t/r-1)*t*t*t-1)+n},easeInOutQuart:function(t,n,e,r){return(t/=r/2)<1?e/2*t*t*t*t+n:-e/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(t,n,e,r){return e*(t/=r)*t*t*t*t+n},easeOutQuint:function(t,n,e,r){return e*((t=t/r-1)*t*t*t*t+1)+n},easeInOutQuint:function(t,n,e,r){return(t/=r/2)<1?e/2*t*t*t*t*t+n:e/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(t,n,e,r){return-e*Math.cos(t/r*(Math.PI/2))+e+n},easeOutSine:function(t,n,e,r){return e*Math.sin(t/r*(Math.PI/2))+n},easeInOutSine:function(t,n,e,r){return-e/2*(Math.cos(Math.PI*t/r)-1)+n},easeInExpo:function(t,n,e,r){return 0==t?n:e*Math.pow(2,10*(t/r-1))+n},easeOutExpo:function(t,n,e,r){return t==r?n+e:e*(1-Math.pow(2,-10*t/r))+n},easeInOutExpo:function(t,n,e,r){return 0==t?n:t==r?n+e:(t/=r/2)<1?e/2*Math.pow(2,10*(t-1))+n:e/2*(2-Math.pow(2,-10*--t))+n},easeInCirc:function(t,n,e,r){return-e*(Math.sqrt(1-(t/=r)*t)-1)+n},easeOutCirc:function(t,n,e,r){return e*Math.sqrt(1-(t=t/r-1)*t)+n},easeInOutCirc:function(t,n,e,r){return(t/=r/2)<1?-e/2*(Math.sqrt(1-t*t)-1)+n:e/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(t,n,e,r){var o=1.70158,a=0,i=e;return 0==t?n:1==(t/=r)?n+e:(a||(a=.3*r),i<Math.abs(e)?(i=e,o=a/4):o=a/(2*Math.PI)*Math.asin(e/i),-i*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)+n)},easeOutElastic:function(t,n,e,r){var o=1.70158,a=0,i=e;return 0==t?n:1==(t/=r)?n+e:(a||(a=.3*r),i<Math.abs(e)?(i=e,o=a/4):o=a/(2*Math.PI)*Math.asin(e/i),i*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/a)+e+n)},easeInOutElastic:function(t,n,e,r){var o=1.70158,a=0,i=e;return 0==t?n:2==(t/=r/2)?n+e:(a||(a=r*(.3*1.5)),i<Math.abs(e)?(i=e,o=a/4):o=a/(2*Math.PI)*Math.asin(e/i),t<1?i*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)*-.5+n:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)*.5+e+n)},easeInBack:function(t,n,e,r,o){return null==o&&(o=1.70158),e*(t/=r)*t*((o+1)*t-o)+n},easeOutBack:function(t,n,e,r,o){return null==o&&(o=1.70158),e*((t=t/r-1)*t*((o+1)*t+o)+1)+n},easeInOutBack:function(t,n,e,r,o){return null==o&&(o=1.70158),(t/=r/2)<1?e/2*(t*t*((1+(o*=1.525))*t-o))+n:e/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+n},easeInBounce:function(t,n,e,r){return e-jQuery.easing.easeOutBounce(r-t,0,e,r)+n},easeOutBounce:function(t,n,e,r){return(t/=r)<1/2.75?e*(7.5625*t*t)+n:t<2/2.75?e*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?e*(7.5625*(t-=2.25/2.75)*t+.9375)+n:e*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(t,n,e,r){return t<r/2?.5*jQuery.easing.easeInBounce(2*t,0,e,r)+n:.5*jQuery.easing.easeOutBounce(2*t-r,0,e,r)+.5*e+n}},Q=/^matrix\(\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*\)$/i,N=function(t,n,e){var r="string"==typeof t?parseInt(t,10):t;return Math.min(Math.max(r,n),e)},R=function(t,n,e,r,o){return e===n?o:(t-n)*(o-r)/(e-n)+r},V="eb",L="et",q="ec",z="sb",H="st",W="sc",X=[];t.ELEM_BOTTOM=V,t.ELEM_TOP=L,t.ELEM_CENTER=q,t.SCREEN_BOTTOM=z,t.SCREEN_TOP=H,t.SCREEN_CENTER=W,t.updateAll=function(){X.forEach(function(t){t.updateElements()})},t.Animator=function(){var t=this,n=[],e=[],r=[],o={},a={},i={},u={},c={width:0,height:0};function s(t){var n=t;return"HTML"===t.tagName&&(n=document.scrollingElement||t),n.scrollTop}function f(t,n,e){if("number"==typeof n)return n;var r=n.match(/([-0-9.]+)(.+)/),o=parseFloat(r[1]);switch(r[2]){case"vh":return o/100*window.innerHeight;case"vw":return o/100*window.innerWidth;case"px":return o;case"%":default:return function(t,n,e){switch(t){case"y":return n/100*e.clientHeight;case"x":default:return n/100*e.clientWidth}}(t,o,e)}}function l(t,e,r,o,a,i){void 0===a&&(a=null),void 0===i&&(i=null);var l=n[o];return a?l=a:l&&!Array.isArray(l)&&(l=l.props),l?l.reduce(function(n,o){var a=Object.assign({},o);delete a.when,a=Object.keys(a).map(function(t){return[t,o[t]]});var l=function(t,n,e){var r=o.when.split("_");if(2!==r.length)throw new Error('Missing parameters in animation "when" (expects: ELEM_SCREEN)');var a,i,f=s(t),l=F(t);switch(r[0]){default:case L:a=n.top-f;break;case q:a=n.top+n.height/2-f;break;case V:a=n.top+n.height-f}switch(r[1]){default:case H:i=u[l]+f;break;case W:i=u[l]+c.height/2+f;break;case z:i=u[l]+c.height+f}return a-i}(t,r);return a.reduce(function(t,r){var o=r[0],a=r[1];return t[o]=n[o]||[],t[o].push([l,f(o,a,i||e)]),t},n)},{}):[]}function h(t,n){var e=N(n.st,n.startOffset,n.endOffset),r=R(e,n.startOffset,n.endOffset,0,1);return t[n.key]=n.ease?B[n.ease](r,n.startValue,n.endValue-n.startValue,1):R(e,n.startOffset,n.endOffset,n.startValue,n.endValue),t}function d(t){t.style.transform="";var n=window.getComputedStyle(t).getPropertyValue("transform");return"none"!==n?function(t){var n=t.match(Q);if(null===n||n.length<7)throw new Error("'"+t+"' is not a matrix");return{a:parseFloat(n[1]),b:parseFloat(n[2]),c:parseFloat(n[3]),d:parseFloat(n[4]),e:parseFloat(n[5]),f:parseFloat(n[6])}}(n):[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function p(t){return n[t]&&n[t].ease||null}function v(t,e){var o=function(t){for(var n=null,e=t;e.parentElement&&!n;)((e=e.parentElement).getAttribute("data-scrollbar")||""===e.getAttribute("data-scrollbar"))&&(n=e);if(!r.find(function(t){return n===t})){var o=F(n);u[o]=e.getBoundingClientRect().top-e.scrollTop,r.push(n)}return n}(e),a=e.getAttribute("data-animator-id"),i=function(t,n){var e=n.getBoundingClientRect(),r=e.top,o=e.height,a=s(t),i=F(t);return{top:r-u[i]+a,height:o}}(o,e);F(e);var c=l(o,e,i,a),f={node:e,context:o,ease:p(a),keyframes:c,keys:Object.keys(c),initialMatrix:d(e)};return t.push(f),t.concat(function(t,e,r,o){return Array.isArray(n[o])?[]:(n[o]&&n[o].children||[]).reduce(function(n,o){return Array.from(e.querySelectorAll(o.selector)).forEach(function(a){var i=l(t,e,r,null,o.props,a);n.push({node:a,context:t,ease:o.ease,keyframes:i,keys:Object.keys(i),initialMatrix:d(a)})}),n},[])}(o,e,i,a))}X.push(this);var y=function(t){var n=F(t),r="HTML"===t.tagName?window:t;o[n]?r.removeEventListener("scroll",o[n]):o[n]=function(){!function(t){var n=F(t),r=s(t);a[n]&&cancelAnimationFrame(a[n]),a[n]=requestAnimationFrame(function(){!function(t,n){e.forEach(function(e){if(e.context===t){var r=function(t,n){var e,r,o,a,i,u,c;return(n.rotation||n.scaleX||n.scaleY||n.x||n.y||n.z)&&(n.transform="matrix3d("+function(t){for(var n,e,r,o,a,i,u,c,s,f,l,h,d,p,v,y,g,m,M,O,b,w,E,I=t[0],_=1;_<t.length;_+=1)r=void 0,O=void 0,b=void 0,w=void 0,E=void 0,a=(n=I)[1],i=n[2],u=n[3],s=n[5],f=n[6],l=n[7],d=n[9],p=n[10],v=n[11],g=n[13],m=n[14],M=n[15],(r=[])[0]=(O=(e=t[_])[0])*(o=n[0])+(b=e[1])*(c=n[4])+(w=e[2])*(h=n[8])+(E=e[3])*(y=n[12]),r[1]=O*a+b*s+w*d+E*g,r[2]=O*i+b*f+w*p+E*m,r[3]=O*u+b*l+w*v+E*M,r[4]=(O=e[4])*o+(b=e[5])*c+(w=e[6])*h+(E=e[7])*y,r[5]=O*a+b*s+w*d+E*g,r[6]=O*i+b*f+w*p+E*m,r[7]=O*u+b*l+w*v+E*M,r[8]=(O=e[8])*o+(b=e[9])*c+(w=e[10])*h+(E=e[11])*y,r[9]=O*a+b*s+w*d+E*g,r[10]=O*i+b*f+w*p+E*m,r[11]=O*u+b*l+w*v+E*M,r[12]=(O=e[12])*o+(b=e[13])*c+(w=e[14])*h+(E=e[15])*y,r[13]=O*a+b*s+w*d+E*g,r[14]=O*i+b*f+w*p+E*m,r[15]=O*u+b*l+w*v+E*M,I=r;return I}([t,(i=n.x||0,u=n.y||0,c=n.z||0,[1,0,0,0,0,1,0,0,0,0,1,0,i,u,c,1]),(a=n.rotation||0,[Math.cos(a),-Math.sin(a),0,0,Math.sin(a),Math.cos(a),0,0,0,0,1,0,0,0,0,1]),(e=n.scaleX||1,r=n.scaleY||1,o=n.scaleZ||1,[e,0,0,0,0,r,0,0,0,0,o,0,0,0,0,1])]).join(",")+")"),delete n.rotation,delete n.scaleX,delete n.scaleY,delete n.x,delete n.y,delete n.z,n}(e.initialMatrix,function(t,n){return t.keys.map(function(e){return t.keyframes[e].reduce(function(r,o){var a=o[0],i=o[1];return(void 0===r.startOffset||n>=a)&&(r.startOffset=a,r.startValue=i,r.endOffset<=r.startOffset&&(r.endOffset=a,r.endValue=i)),(void 0===r.endOffset||n<=a)&&(r.endOffset=a,r.endValue=i),Object.assign({},{st:n,ease:t.ease,key:e},r)},{})}).reduce(h,{})}(e,n)),o=F(e.node);(function(t,n){return!i[t]||i[t]!==JSON.stringify(n)})(o,r)&&(Object.assign(e.node.style,r),i[o]=r)}})}(t,r)})}(t)},r.addEventListener("scroll",o[n]),o[n](t)};this.updateElements=function(){r=[],c.width=window.innerWidth,c.height=window.innerHeight;var t=document.querySelectorAll("[data-animator-id]");e=Array.from(t).reduce(v,[]),r.forEach(y)},this.setAnimations=function(e){n=e,t.updateElements()},this.debug=function(){console.log("animations",n),console.log("elements",e),console.log("contexts",r)}}});
//# sourceMappingURL=animator.umd.js.map
