!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.animator={})}(this,function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),r=e(function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)}),o=function(t){return"object"==typeof t?null!==t:"function"==typeof t},i=function(t){if(!o(t))throw TypeError(t+" is not an object!");return t},a=function(t){try{return!!t()}catch(t){return!0}},u=!a(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),c=n.document,s=o(c)&&o(c.createElement),f=!u&&!a(function(){return 7!=Object.defineProperty(s?c.createElement("div"):{},"a",{get:function(){return 7}}).a}),l=Object.defineProperty,h={f:u?Object.defineProperty:function(t,e,n){if(i(t),e=function(t,e){if(!o(t))return t;var n,r;if("function"==typeof(n=t.toString)&&!o(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!o(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e),i(n),f)try{return l(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},d=u?function(t,e,n){return h.f(t,e,function(t,e){return{enumerable:!1,configurable:!0,writable:!0,value:e}}(0,n))}:function(t,e,n){return t[e]=n,t},p={}.hasOwnProperty,v=function(t,e){return p.call(t,e)},y=0,g=Math.random(),m=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++y+g).toString(36))},M=e(function(t){var e=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:r.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),O=M("native-function-to-string",Function.toString),b=e(function(t){var e=m("src"),o=(""+O).split("toString");r.inspectSource=function(t){return O.call(t)},(t.exports=function(t,r,i,a){var u="function"==typeof i;u&&(v(i,"name")||d(i,"name",r)),t[r]!==i&&(u&&(v(i,e)||d(i,e,t[r]?""+t[r]:o.join(String(r)))),t===n?t[r]=i:a?t[r]?t[r]=i:d(t,r,i):(delete t[r],d(t,r,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||O.call(this)})}),w=function(t,e,n){if(function(e){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},E=function(t,e,o){var i,a,u,c,s=t&E.F,f=t&E.G,l=t&E.P,h=t&E.B,p=f?n:t&E.S?n[e]||(n[e]={}):(n[e]||{}).prototype,v=f?r:r[e]||(r[e]={}),y=v.prototype||(v.prototype={});for(i in f&&(o=e),o)u=((a=!s&&p&&void 0!==p[i])?p:o)[i],c=h&&a?w(u,n):l&&"function"==typeof u?w(Function.call,u):u,p&&b(p,i,u,t&E.U),v[i]!=u&&d(v,i,c),l&&y[i]!=u&&(y[i]=u)};n.core=r,E.F=1,E.G=2,E.S=4,E.P=8,E.B=16,E.W=32,E.U=64,E.R=128;var _=E,I={}.toString,x=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==function(t){return I.call(t).slice(8,-1)}(t)?t.split(""):Object(t)},S=Math.ceil,A=Math.floor,j=Math.min,P=(Array,e(function(t){var e=M("wks"),r=n.Symbol,o="function"==typeof r;(t.exports=function(t){return e[t]||(e[t]=o&&r[t]||(o?r:m)("Symbol."+t))}).store=e})),k=(P("species"),P("unscopables")),C=Array.prototype;null==C[k]&&d(C,k,{});var T=!0;function F(t){var e=t.getAttribute("data-guid");return e||(e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),t.setAttribute("data-guid",e)),e}"find"in[]&&Array(1).find(function(){T=!1}),_(_.P+_.F*T,"Array",{find:function(t){return function(t,e,n){for(var r,o=Object(function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}(t)),i=x(o),a=w(e,n,3),u=(s=i.length)>0?j(function(t){return isNaN(t=+t)?0:(t>0?A:S)(t)}(s),9007199254740991):0,c=0;u>c;c++)if(a(r=i[c],c,o))return r;var s}(this,t,arguments.length>1?arguments[1]:void 0)}}),C[k].find=!0;var B={easeInQuad:function(t,e,n,r){return n*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){return-n*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){return n*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){return n*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){return-n*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){return n*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){return-n*Math.cos(t/r*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,r){return n*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){return-n/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){return 0==t?e:n*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){return t==r?e+n:n*(1-Math.pow(2,-10*t/r))+e},easeInOutExpo:function(t,e,n,r){return 0==t?e:t==r?e+n:(t/=r/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,n,r){return-n*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){return n*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){return(t/=r/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var o=1.70158,i=0,a=n;return 0==t?e:1==(t/=r)?e+n:(i||(i=.3*r),a<Math.abs(n)?(a=n,o=i/4):o=i/(2*Math.PI)*Math.asin(n/a),-a*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/i)+e)},easeOutElastic:function(t,e,n,r){var o=1.70158,i=0,a=n;return 0==t?e:1==(t/=r)?e+n:(i||(i=.3*r),a<Math.abs(n)?(a=n,o=i/4):o=i/(2*Math.PI)*Math.asin(n/a),a*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/i)+n+e)},easeInOutElastic:function(t,e,n,r){var o=1.70158,i=0,a=n;return 0==t?e:2==(t/=r/2)?e+n:(i||(i=r*(.3*1.5)),a<Math.abs(n)?(a=n,o=i/4):o=i/(2*Math.PI)*Math.asin(n/a),t<1?a*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/i)*-.5+e:a*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/i)*.5+n+e)},easeInBack:function(t,e,n,r,o){return null==o&&(o=1.70158),n*(t/=r)*t*((o+1)*t-o)+e},easeOutBack:function(t,e,n,r,o){return null==o&&(o=1.70158),n*((t=t/r-1)*t*((o+1)*t+o)+1)+e},easeInOutBack:function(t,e,n,r,o){return null==o&&(o=1.70158),(t/=r/2)<1?n/2*(t*t*((1+(o*=1.525))*t-o))+e:n/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+e},easeInBounce:function(t,e,n,r){return n-jQuery.easing.easeOutBounce(r-t,0,n,r)+e},easeOutBounce:function(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){return t<r/2?.5*jQuery.easing.easeInBounce(2*t,0,n,r)+e:.5*jQuery.easing.easeOutBounce(2*t-r,0,n,r)+.5*n+e}},N=/^matrix\(\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*\)$/i,Q=function(t,e,n){var r="string"==typeof t?parseInt(t,10):t;return Math.min(Math.max(r,e),n)},R=function(t,e,n,r,o){return n===e?o:(t-e)*(o-r)/(n-e)+r},V="eb",L="et",q="ec",z="sb",H="st",W="sc",X=[];window.__animators=X,t.ELEM_BOTTOM=V,t.ELEM_TOP=L,t.ELEM_CENTER=q,t.SCREEN_BOTTOM=z,t.SCREEN_TOP=H,t.SCREEN_CENTER=W,t.updateAll=function(){X.forEach(function(t){t.updateElements()})},t.Animator=function(){var t=this,e=[],n=[],r=[],o={},i={},a={},u={},c={width:0,height:0};function s(t){var e=t;return"HTML"===t.tagName&&(e=document.scrollingElement||t),e.scrollTop}function f(t,e,n){if("number"==typeof e)return e;var r=e.match(/([-0-9.]+)(.+)/),o=parseFloat(r[1]);switch(r[2]){case"vh":return o/100*window.innerHeight;case"vw":return o/100*window.innerWidth;case"px":return o;case"%":default:return function(t,e,n){switch(t){case"y":return e/100*n.clientHeight;case"x":default:return e/100*n.clientWidth}}(t,o,n)}}function l(t,n,r,o,i,a){void 0===i&&(i=null),void 0===a&&(a=null);var l=e[o];return i?l=i:l&&!Array.isArray(l)&&(l=l.props),l?l.reduce(function(e,o){var i=Object.assign({},o);delete i.when,i=Object.keys(i).map(function(t){return[t,o[t]]});var l=function(t,e,n){var r=o.when.split("_");if(2!==r.length)throw new Error('Missing parameters in animation "when" (expects: ELEM_SCREEN)');var i,a,f=s(t),l=F(t);switch(r[0]){default:case L:i=e.top-f;break;case q:i=e.top+e.height/2-f;break;case V:i=e.top+e.height-f}switch(r[1]){default:case H:a=u[l]+f;break;case W:a=u[l]+c.height/2+f;break;case z:a=u[l]+c.height+f}return i-a}(t,r);return i.reduce(function(t,r){var o=r[0],i=r[1];return t[o]=e[o]||[],t[o].push([l,f(o,i,a||n)]),t},e)},{}):[]}function h(t,e){var n=Q(e.st,e.startOffset,e.endOffset),r=R(n,e.startOffset,e.endOffset,0,1);return t[e.key]=e.ease?B[e.ease](r,e.startValue,e.endValue-e.startValue,1):R(n,e.startOffset,e.endOffset,e.startValue,e.endValue),t}function d(t){t.style.transform="";var e=window.getComputedStyle(t).getPropertyValue("transform");return"none"!==e?function(t){var e=t.match(N);if(null===e||e.length<7)throw new Error("'"+t+"' is not a matrix");return{a:parseFloat(e[1]),b:parseFloat(e[2]),c:parseFloat(e[3]),d:parseFloat(e[4]),e:parseFloat(e[5]),f:parseFloat(e[6])}}(e):[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function p(t){return e[t]&&e[t].ease||null}function v(t,n){var o=function(t){for(var e=null,n=t;n.parentElement&&!e;)((n=n.parentElement).getAttribute("data-scrollbar")||""===n.getAttribute("data-scrollbar"))&&(e=n);if(!r.find(function(t){return e===t})){var o=F(e);u[o]=n.getBoundingClientRect().top-n.scrollTop,r.push(e)}return e}(n),i=n.getAttribute("data-animator-id"),a=function(t,e){var n=e.getAttribute("style");e.setAttribute("style","");var r=e.getBoundingClientRect(),o=r.top,i=r.height,a=s(t),c=F(t);return e.setAttribute("style",n),{top:o-u[c]+a,height:i}}(o,n);F(n);var c=l(o,n,a,i),f={node:n,context:o,ease:p(i),keyframes:c,keys:Object.keys(c),initialMatrix:d(n)};return t.push(f),t.concat(function(t,n,r,o){return Array.isArray(e[o])?[]:(e[o]&&e[o].children||[]).reduce(function(e,o){return Array.from(n.querySelectorAll(o.selector)).forEach(function(i){var a=l(t,n,r,null,o.props,i);e.push({node:i,context:t,ease:o.ease,keyframes:a,keys:Object.keys(a),initialMatrix:d(i)})}),e},[])}(o,n,a,i))}X.push(this);var y=function(t){var e=F(t),r="HTML"===t.tagName?window:t;o[e]?r.removeEventListener("scroll",o[e]):o[e]=function(){!function(t){var e=F(t),r=s(t);i[e]&&cancelAnimationFrame(i[e]),i[e]=requestAnimationFrame(function(){!function(t,e){n.forEach(function(n){if(n.context===t){var r=function(t,e){var n,r,o,i,a,u,c;return void 0===e.rotation&&void 0===e.scaleX&&void 0===e.scaleY&&void 0===e.x&&void 0===e.y&&void 0===e.z||(e.transform="matrix3d("+function(t){for(var e,n,r,o,i,a,u,c,s,f,l,h,d,p,v,y,g,m,M,O,b,w,E,_=t[0],I=1;I<t.length;I+=1)r=void 0,O=void 0,b=void 0,w=void 0,E=void 0,i=(e=_)[1],a=e[2],u=e[3],s=e[5],f=e[6],l=e[7],d=e[9],p=e[10],v=e[11],g=e[13],m=e[14],M=e[15],(r=[])[0]=(O=(n=t[I])[0])*(o=e[0])+(b=n[1])*(c=e[4])+(w=n[2])*(h=e[8])+(E=n[3])*(y=e[12]),r[1]=O*i+b*s+w*d+E*g,r[2]=O*a+b*f+w*p+E*m,r[3]=O*u+b*l+w*v+E*M,r[4]=(O=n[4])*o+(b=n[5])*c+(w=n[6])*h+(E=n[7])*y,r[5]=O*i+b*s+w*d+E*g,r[6]=O*a+b*f+w*p+E*m,r[7]=O*u+b*l+w*v+E*M,r[8]=(O=n[8])*o+(b=n[9])*c+(w=n[10])*h+(E=n[11])*y,r[9]=O*i+b*s+w*d+E*g,r[10]=O*a+b*f+w*p+E*m,r[11]=O*u+b*l+w*v+E*M,r[12]=(O=n[12])*o+(b=n[13])*c+(w=n[14])*h+(E=n[15])*y,r[13]=O*i+b*s+w*d+E*g,r[14]=O*a+b*f+w*p+E*m,r[15]=O*u+b*l+w*v+E*M,_=r;return _}([t,(a=e.x||0,u=e.y||0,c=e.z||0,[1,0,0,0,0,1,0,0,0,0,1,0,a,u,c,1]),(i=e.rotation||0,[Math.cos(i),-Math.sin(i),0,0,Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1]),(n=e.scaleX||1,r=e.scaleY||1,o=e.scaleZ||1,[n,0,0,0,0,r,0,0,0,0,o,0,0,0,0,1])]).join(",")+")"),delete e.rotation,delete e.scaleX,delete e.scaleY,delete e.x,delete e.y,delete e.z,e}(n.initialMatrix,function(t,e){return t.keys.map(function(n){return t.keyframes[n].reduce(function(r,o){var i=o[0],a=o[1];return(void 0===r.startOffset||e>=i)&&(r.startOffset=i,r.startValue=a,r.endOffset<=r.startOffset&&(r.endOffset=i,r.endValue=a)),(void 0===r.endOffset||e<=i)&&(r.endOffset=i,r.endValue=a),Object.assign({},{st:e,ease:t.ease,key:n},r)},{})}).reduce(h,{})}(n,e)),o=F(n.node);(function(t,e){return!a[t]||a[t]!==JSON.stringify(e)})(o,r)&&(Object.assign(n.node.style,r),a[o]=JSON.stringify(r))}})}(t,r)})}(t)},r.addEventListener("scroll",o[e]),o[e](t)};this.updateElements=function(){r=[],c.width=window.innerWidth,c.height=window.innerHeight;var t=document.querySelectorAll("[data-animator-id]");n=Array.from(t).reduce(v,[]),r.forEach(y)},this.setAnimations=function(n){e=n,t.updateElements()},this.debug=function(){console.log("animations",e),console.log("elements",n),console.log("contexts",r)}}});
//# sourceMappingURL=animator.umd.js.map
